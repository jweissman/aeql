(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(92)},34:function(e,t,a){},35:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(26),o=a.n(l),i=(a(34),a(35),a(6)),s=a(3),u=a(4),m=a(18),d=a(17),h=a(19),f=a(7),b=a.n(f),E=a(27);if(a.n(E).a){console.warn("Loading Aeql grammar from filesystem...");var p=a(90).readFileSync("./src/Aeql/Aeql.ohm");n=b.a.grammar(p)}else n=b.a.grammarFromScriptElement();var g=n,y=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(u.a)(e,[{key:"describe",value:function(){return this.value}},{key:"getValue",value:function(){return this.value}}]),e}(),v=function(){function e(t){Object(s.a)(this,e),this.name=t}return Object(u.a)(e,[{key:"describe",value:function(){return"".concat(this.name.describe(),"[subject]")}},{key:"getName",value:function(){return this.name.getValue()}}]),e}(),O=function(){function e(t){Object(s.a)(this,e),this.name=t}return Object(u.a)(e,[{key:"describe",value:function(){return"".concat(this.name.describe(),"[order]")}},{key:"getName",value:function(){return this.name.getValue()}}]),e}(),j=function(){function e(t,a,n){Object(s.a)(this,e),this.subject=t,this.order=a,this.conditions=n,console.log("CONSTRUCT QUERY",{subject:t,order:a,conditions:n})}return Object(u.a)(e,[{key:"describe",value:function(){console.log("conditions",this.conditions);var e="";this.conditions&&this.conditions.length&&(e="where ".concat(this.conditions.map(function(e){return e.describe()})));var t="";return this.order&&(t="by ".concat(this.order.describe())),"Find ".concat(this.subject.describe()," ").concat(t," ").concat(e)}}]),e}(),w={Query:function(e,t,a){var n=t.tree(),r=a.tree(),c=void 0;r instanceof Array&&(console.log("GOT A ARRAY HERE :("),r.forEach(function(e){if(e instanceof O){if(c)throw new Error("Can't have multiple orderings");c=e}}));var l=new j(n,c,[]);return console.log("QUERY TREE",{q:l,entityTree:n,elementsTree:r,orderTree:c}),l},Entity:function(e){return new v(e.tree())},Order:function(e,t){var a=t.tree(),n=new O(a);return console.log("ORDER TREE",{orderTree:a,ordering:n}),n},ident:function(e,t){return new y(e.sourceString+t.sourceString)}},k=g.createSemantics();k.addOperation("tree",w);var A=k,q=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},N=function(){function e(t){Object(s.a)(this,e),this.config=t,this.personae=void 0,this.data=void 0,this.personae=t.personae,t.data&&(this.data=t.data)}return Object(u.a)(e,[{key:"interpret",value:function(e){console.log("processing input",e);var t=g.match(e);if(t.succeeded())return A(t).tree();throw new Error("Could not parse input string: "+t.message)}},{key:"evaluate",value:function(t){if(this.data)return e.processQuery(t,this.data);throw new Error("No data provided!")}},{key:"resolve",value:function(e){return this.evaluate(this.interpret(e))}}],[{key:"processQuery",value:function(e,t){var a=q(e.subject.getName());console.log("LOOKUP COLLECTION",{collectionName:a,data:t});var n=t[a].slice();if(e.order){var r=e.order;console.log("APPLY ORDER",{order:r});var c=r.getName();n=n.sort(function(e,t){return e[c]>t[c]?1:-1})}return n}}]),e}(),C=(a(91),function(e){var t=e.models;return c.a.createElement("section",{className:"EntityTable"},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,Object.entries(t[0]).map(function(e){var t=Object(i.a)(e,2),a=t[0];t[1];return c.a.createElement("th",{key:a},q(a))}))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement(c.a.Fragment,null,Object.entries(e).map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement("td",{key:a},n)})))}))))}),S=new N({personae:{Human:{name:"string",age:"int"},Employee:{name:"string",age:"int",salary:"int"}},data:{Humans:[{id:1,name:"Zeta",age:59},{id:2,name:"Bob",age:23},{id:3,name:"Jim",age:19},{id:4,name:"Abel",age:24},{id:5,name:"Sawyer",age:34}],Employees:[{id:1,name:"Rhonda",age:47},{id:2,name:"Barbara-Anniston",age:23},{id:3,name:"Carol Andrews",age:35},{id:4,name:"Sandra Amberg",age:42},{id:5,name:"Andra Saunders",age:23},{id:6,name:"Exandra Calabanza",age:68}]}}),R=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.query,a=e.parseAeql,n=e.resultData;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"query playground"),c.a.createElement("p",null,"enter your query here!"),c.a.createElement("section",{style:{backgroundColor:"#e4eae9"}},c.a.createElement("p",null,"the basic form of a query begins with ",c.a.createElement("code",null,"find...")," or ",c.a.createElement("code",null,"get [model-or-persona-name]")),c.a.createElement("p",null,"you can order by attributes with ",c.a.createElement("code",null,"by [attribute name]"))),c.a.createElement("label",null,"ask aeql anything: \xa0",c.a.createElement("textarea",{style:{minWidth:"60vw",minHeight:"20vh"},id:"query",value:t,onChange:function(e){return a(e.target.value)}})),c.a.createElement("section",{className:"Result"},this.props.children,c.a.createElement("h3",null,"result"),n.length&&c.a.createElement(C,{models:n})),c.a.createElement("section",{className:"SchemaAndDataSet"},c.a.createElement("b",null,"SCHEMA"),Object.entries(S.personae).map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement("section",{className:"persona",key:a},c.a.createElement("h3",null,"Persona ",a),c.a.createElement("ul",null,Object.entries(n).map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{key:a},a," (",n,")")})))})))}}]),t}(c.a.Component),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",result:"",resultData:[]},a.parseAeql=function(e){var t=e;if(""===t)a.setState({query:"",result:""});else{var n="",r=[];try{var c=S.interpret(t);n="match: ".concat(c.describe(),"\n"),r=S.evaluate(c)}catch(l){n=l.message}a.setState({query:t,result:n,resultData:r})}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.parseAeql("find humans by name")}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{style:{backgroundColor:"#faf4f7"}},c.a.createElement(R,{parseAeql:this.parseAeql,query:this.state.query,resultData:this.state.resultData},this.state.result)),c.a.createElement("section",{style:{backgroundColor:"#eaeaf3"}},c.a.createElement("b",null,"DATA"),S.data&&Object.entries(S.data).map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement(C,{key:a,collectionName:a,models:n})})))}}]),t}(r.Component),D=function(){return c.a.createElement("span",{className:"Aeql-name",style:{color:"#aeeaea",textShadow:"1.2px 1.2px #aeaeae",fontSize:"135%",fontWeight:"bolder"}},"aeql")},x=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},"hello aeql"),c.a.createElement("main",{className:"App-main"},c.a.createElement("section",{className:"Welcome",style:{backgroundColor:"#fafaf3"}},c.a.createElement("h1",null,"let's learn all about ",c.a.createElement(D,null),"!"),c.a.createElement("p",null,c.a.createElement(D,null),": it's a tiny query language"),c.a.createElement("pre",null,"find humans by name"),c.a.createElement("p",null,c.a.createElement(D,null)," emphasizes human values, encouraging the description of personae in the system")),c.a.createElement("section",{className:"QueryManager"},c.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.81c5e8fd.chunk.js.map